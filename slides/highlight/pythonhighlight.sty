\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{pythonhighlight}[]%Mateusz Paprocki <mattpap@gmail.com>]

\RequirePackage{listings}
\RequirePackage{xcolor}

\definecolor{pantonexcolour}{RGB}{152,50,34}
\definecolor{pantoneycolour}{RGB}{241,209,162}

\colorlet{stringcolour}{red!60!black}
\colorlet{commentcolour}{green!50!black}
\colorlet{keywordcolour}{magenta!90!black}
\colorlet{exceptioncolour}{yellow!50!red}
\colorlet{commandcolour}{blue!60!black}
\colorlet{functioncolour}{blue!60!green}
\colorlet{literatecolour}{magenta!90!black}
\colorlet{specialcolour}{violet}

\newcommand{\python@numbercolour}{\textcolor{numbercolour}}
\newcommand{\python@literatecolour}{\textcolor{literatecolour}}

\lstdefinestyle{python}{
    language=python,
    showtabs=true,
    tab=,
    tabsize=2,
    showstringspaces=false,
    basicstyle=\ttfamily\scriptsize,
    stringstyle=\color{stringcolour},
    commentstyle=\color{commentcolour}\slshape,
    keywordstyle=\color{keywordcolour}\bfseries,
    emph={[2]True,False,None},
    emphstyle=[2]\color{keywordcolour},
    emph={[3]object,type,isinstance,copy,deepcopy,zip,enumerate,reversed,list,
             len,dict,tuple,range,xrange,append,execfile,real,imag,reduce,str,repr},
    emphstyle=[3]\color{commandcolour},
    emph={[4]Exception,NameError,IndexError,SyntaxError,TypeError,ValueError,OverflowError,ZeroDivisionError},
    emphstyle=[4]\color{exceptioncolour}\bfseries,
    emph={[5]sympify,simplify,factor,factors,var,subs,integrate,limit,groebner,
             sinh,cosh,erf,ode,fsolve,sqrt,exp,sin,cos,arccos,pi,array,norm,dot,
             solve,arange,isscalar,max,sum,flatten,shape,reshape,find,any,all,abs,
             plot,linspace,legend,quad,polyval,polyfit,hstack,concatenate,vstack,rand,
             column_stack,empty,zeros,ones,vander,grid,pcolor,eig,eigs,eigvals,svd,qr,tan,
             det,logspace,roll,min,mean,cumsum,cumprod,diff,vectorize,lstsq,cla,eye,xlabel,
             ylabel,squeeze},
    emphstyle=[5]\color{functioncolour},
    emph={[6]__init__,__add__,__mul__,__div__,__sub__,__call__,__getitem__,__setitem__,
             __eq__,__ne__,__nonzero__,__rmul__,__radd__,__repr__,__str__,__get__,
             __truediv__,__pow__,__name__,__future__,__all__},
    emphstyle=[6]\color{specialcolour},
    literate=*
        {0}{{\python@numbercolour0}}{1}
        {1}{{\python@numbercolour1}}{1}
        {2}{{\python@numbercolour2}}{1}
        {3}{{\python@numbercolour3}}{1}
        {4}{{\python@numbercolour4}}{1}
        {5}{{\python@numbercolour5}}{1}
        {6}{{\python@numbercolour6}}{1}
        {7}{{\python@numbercolour7}}{1}
        {8}{{\python@numbercolour8}}{1}
        {9}{{\python@numbercolour9}}{1}
        {:}{{\python@literatecolour:}}{1}
        {=}{{\python@literatecolour=}}{1}
        {-}{{\python@literatecolour-}}{1}
        {+}{{\python@literatecolour+}}{1}
        {*}{{\python@literatecolour*}}{1}
        {/}{{\python@literatecolour/}}{1}
        {!}{{\python@literatecolour!}}{1}
        {&}{{\python@literatecolour{\char38}}}{1}
        {@}{{\python@literatecolour{\char64}}}{1}
        {^}{{\python@literatecolour{\char94}}}{1}
        {~}{{\python@literatecolour{\char126}}}{1}
        {<}{{\python@literatecolour<}}{1}
        {>}{{\python@literatecolour>}}{1}
        {[}{{\python@literatecolour[}}{1}
        {]}{{\python@literatecolour]}}{1},
    frame=trbl,
    rulecolor=\color{black!50},
    backgroundcolor=\color{pantoneycolour!50}
}

\lstnewenvironment{python}
    {\lstset{style=python}}{}

